<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />

    <title>reveal.js</title>

    <link rel="stylesheet" href="dist/reset.css" />
    <link rel="stylesheet" href="dist/reveal.css" />
    <link rel="stylesheet" href="dist/theme/black.css" id="theme" />

    <!-- Theme used for syntax highlighted code -->
    <link
      rel="stylesheet"
      href="plugin/highlight/monokai.css"
      id="highlight-theme"
    />
  </head>

  <!-- .slide: data-background="#2b6a6c" -->
  <body>
    <div class="reveal">
      <div class="slides">
        <section data-markdown>
          <script type="text/template">
            Git in the trunk

            !["Git in the trunk"](images/inthetrunk.png)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            - start with why
              - high performing teams
              - 2 examples of effectiveness

            - what
              - continuous integration
              - TBD explained
              - feature branching explained
              - why (not)

            - how
              - TBD mindset
              - practical patterns
              - releasing (without and with TBD)
              - pitfalls

            - questions/discuss
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            !["Start with why"](images/startwithwhy.png)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            !["effective teams"](images/effective-teams.png)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Two digit lottery
            _A winning combination pays off $100._
            ### We can:
            (A) buy a two-digit lottery ticket for $1.

            *OR*

            (B) buy 1 digit for 0.5$ _with the option to buy another digit of 50 cents - after the first digit is revealed._
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## Two digit lottery
            - ( A ) -> good luck...
            - ( B ) -> first digit is "4"
              - do you invest another 50c for a second number?
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            !["42"](images/feedback.png)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## mailing cards
            - write address
            - fold card
            - put the card in the envelope, seal it
            - put on the stamp
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## mailing cards
            - ( A ) - BULK: write all addresses, fold all cards, ...
            - ( B ) - ONE BY ONE - one card at a time; write address, fold card, ...
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            (B) The one envelope at a time approach is a faster way of getting the job done even though it seems inefficient.
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            - Lean principle: One piece flow
              - more iterations = (more) continuous improvement of the process
              - (forced to) fix mistakes immediately
              - earlier discovery of defects= compounding effect (finding bugs later = more expensive)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            Cost of change

            !["Cost of change"](images/cost-of-change.jpg)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            Increasing effectiveness - the importance of:
              - feedback - is my code safe to release TODAY?
              - managing queues - DO NOT BATCH, small and incremental instead
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            - what
              - continuous integration
              - TBD explained
              - feature branching explained
              - why (not)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Continuous integration
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            In software engineering, continuous integration (CI) is the practice of merging all developers' working copies to a shared mainline several times a day.
            https://en.wikipedia.org/wiki/Continuous_integration
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            !["CI on a dollar a day"](images/CI_dollar_day.png)
          </script>
        </section>

        <section>
          Trunk based development
          <blockquote>
            A source-control branching model, where developers collaborate on
            code in a single branch called ‘trunk’ *, resist any pressure to
            create other long-lived development branches by employing documented
            techniques. They therefore avoid merge hell, do not break the build,
            and live happily ever after.
          </blockquote>
          <small>* master, or main, in Git nomenclature</small>
        </section>

        <section>
          Trunk based development
          <blockquote>
            <p>
              <small
                >Trunk based development is about getting rid of the mindset
                that only "finished" and "fully working" code should be
                committed into master. This is never the case.
              </small>
            </p>
            <p>
              <small
                >The mindset that this model offers instead is that each commit
                must NOT be a breaking change. The key is to be making small
                atomic changes, which don't break CI and your functionality at
                runtime.
              </small>
            </p>
            <p>
              <small
                >Trunk based development doesn't have to mean everybody pushing
                to master without any code reviews. What it means is that
                instead of making multiple small commits into your feature
                branch, you make pull requests for those same commits to master
                instead.
              </small>
            </p>
            <p>
              <small
                >This requires to break down your work into smaller increments,
                each of which is slowly working towards a completed
                feature.</small
              >
            </p>
          </blockquote>
        </section>

        <section data-markdown>
          <script type="text/template">
            !["feature branching"](images/feature-branching.png)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ![alt text](images/stateofdevops.png "Title")

            -> continuous isolation
          </script>
        </section>

        <section>
          <blockquote>
            "Feature Branching is a poor man’s modular architecture, instead of
            building systems with the ability to easily swap in and out features
            at runtime/deploytime they couple themselves to the source control
            providing this mechanism through manual merging."
          </blockquote>
          (Dan Bodart)
        </section>

        <section data-markdown>
          <script type="text/template">
            !["feature branch vs TBD"](images/feature-branching-vs-tbd.png)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## how
              - TBD mindset
              - incremental development
              - practical patterns
              - releasing (without and with TBD)
              - pitfalls
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## TBD mindset:
            - practice incremental software development
            - never break the build - _stop the line; andon cord_
            - escaped bug? _write an automated test!_
            - fast builds: _make and keep them fast!_
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## Incremental development
            "Deployed": technical - introduced in Production.
            “Released”: business - available to an end-user.

            “Deployed” !== “Released”.

            _Too often treated as ===_
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            ## practical patterns
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            Feature toggles

            !["feature toggles"](images/feature_toggle.png)
            -  decouple deploy from release
            - "dark launch" (customers or developers)
            - technical (refactoring) OR functional
            - simplest form: app config, ...
            - important to remove after implementation(!)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            Refactoring straight on trunk
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            branch by abstraction (micro)
            !["strangler pattern"](images/strangler-pattern.jpeg)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            - introduce interface
            - implement alternative implementation
            - remove original implementation
            - remove interface (optional)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            the strangler pattern (macro)

            !["strangler pattern"](images/strangler-pattern-fig.jpg)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## releasing

            (without and with TBD)
          </script>
        </section>
        <section data-markdown>
          <script type="text/template">
            !["TBD releases"](images/unmerge.jpg)
            - change of sequence? the cost of unmerge
            - constant merging (conflicts)
            - alternative worse: infrequent, huge merges
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            !["strangler pattern"](images/release1.png)
            !["strangler pattern"](images/release3.png)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            !["TBD releases"](images/releases.png)

            hardening releases
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            !["strangler pattern"](images/release2.png)
            !["strangler pattern"](images/release3.png)
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            ## doing it wrong
            - Cherry-pick of bug fixes from release branches to the trunk
            - Merging rather than cherry-pick to/from a release branch
            - Duration of ‘short-lived’ feature branches
            - Numbers of developers on ‘short-lived’ feature branches
            - Keeping a single release branch
            - Merge from one release branch to another release branch
            - Merge everything back from a release branch at the end of the release branch
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            Questions/discussion

            - https://app.circleci.com/insights/github/Lansweeper
          </script>
        </section>

        <section data-markdown>
          <script type="text/template">
            Links:
            - https://trunkbaseddevelopment.com/
            - Feature branching is evil https://www.youtube.com/watch?v=h4DM-Wa0aDQ
            - http://www.startuplessonslearned.com/2011/09/power-of-small-batches.html
            - https://paulhammant.com/2013/03/19/cost-of-unmerge/
          </script>
        </section>
      </div>
    </div>

    <script src="dist/reveal.js"></script>
    <script src="plugin/notes/notes.js"></script>
    <script src="plugin/markdown/markdown.js"></script>
    <script src="plugin/highlight/highlight.js"></script>
    <script>
      // More info about initialization & config:
      // - https://revealjs.com/initialization/
      // - https://revealjs.com/config/
      Reveal.initialize({
        hash: true,

        // Learn about plugins: https://revealjs.com/plugins/
        plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
      });
    </script>
  </body>
</html>
